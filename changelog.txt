# Changelog
- 2026-01-21: Added changelog policy to AGENTS.md and started recording tasks in changelog.txt.
- 2026-01-21: Added standalone share icon under the calendar context menu button.
- 2026-01-22: Added plan categories management and category-based plan filtering for sessions and series.
- 2026-01-22: Fixed calendar context actions (register/edit series), improved modal scrolling, updated delete icons, aligned registration lookup, added series remote capacity column and time formatting, fixed birthday controls, and ensured series icon picker + invite mailto fallback.
- 2026-01-22: Fixed calendar nav direction and removed Hebrew date label, added time editing in session modal, removed edit-series from context menu, renamed Users to Team and filtered guest-only users, aligned customer city/address row, added generate confirmation, and added in-app invite email composer with backend send endpoint.
- 2026-01-22: Switched calendar toolbar to a two-column layout with actions and navigation rows, added multi-day series support end-to-end, and expanded Playwright coverage with plan category management tests.
- 2026-01-22: Adjusted nav group styling/indentation, enforced 24h time formatting, and added a divider for multi-day series weekday selection.
- 2026-01-23: Added toolbar icons and sizing tweaks (users/customers/guests), removed remote capacity column from calendar list, enabled bulk customer email/SMS composer with mailto fallback, improved birthday chevron styling, added room remote support migration + i18n keys, and updated admin nav tests.
- 2026-01-23: Fixed duplicate const in session recurrence handler, restored admin rendering, and resolved Playwright run.
- 2026-01-23: Preserve event route through login for shared session links and moved series days-of-week field under title/icon/color.
- 2026-01-23: Updated calendar list view to page by year from month start and adjusted RTL nav direction handling.
- 2026-01-24: Updated default theme palette to #f1c232-based colors, enforced 24h formatting in shared utils, moved Today into the calendar actions header, and split session details vs. registrations into separate modals with a participants list.
- 2026-01-24: Switched date/time inputs and formatting to DD/MM/YYYY + 24h across admin/public, updated calendar nav ordering, refreshed palette to #f1c232 family across admin/app/public, fixed session edit footer placement, and sync calendar capacity after registration.
2026-01-25 01:27  Fix session edit modal structure (header/footer fixed), restore calendar nav arrow order with RTL swap, update app date labels to DD/MM/YYYY, and adjust date-input styling for text inputs.
2026-01-25 02:31  Fix RTL calendar nav arrow direction and move Today button to left in RTL toolbar.
2026-01-25 02:42  Move Today button into calendar nav after Next and remove RTL row-reverse on nav so prev/next positions are correct.
2026-01-25 08:45  Make Calendar/Customers group headers clickable, streamline registrations modal (single header, session description, inline attendance selector), and fix roster select-all layout.
2026-01-25 15:28  Remove customer first/last name fields, add Google Places (IL) autocomplete for city/address, and store Places API key in studio settings + schema.
2026-01-26 01:11  Enforced Sunday week start, added past-session styling and registration layout tweaks, introduced customer tags management + filtering/sorting, and built customer details page with registrations/attachments/forms/activity plus new customer tags schema.
2026-01-26 02:02  Adjust calendar toolbar layout/nav RTL behavior, refresh tag management without closing, merge customer tags into studio catalog, and add missing roster label translations.
2026-01-26 02:06  Update Playwright admin calendar toolbar expectations for new layout.
2026-01-26 08:42  Move calendar week range above view buttons, redesign customer details into two-column layout, add activity logging with optional photo, and add customer registrations/billing modals.
2026-01-27 00:15  Prevent past-session registrations, reposition week label under view buttons, center collapsed nav icons with visible group headers, redesign customer header, and add colored tag catalog with chips in customer list/details plus tag color management.
2026-01-27 00:24  Fix tag color palette helper for top-level Program build.
2026-01-27 00:27  Fix duplicate variable name in tag delete flow.
2026-01-27 01:29  Align calendar toolbar top edges, hide admin header in collapsed menu, and center collapsed sidebar items.
2026-01-28 01:22  Adjust nav indentation and center collapsed sidebar icons/logo/logout.
2026-01-28 19:47  Simplify tag color picker, move registration add-customer into autocomplete option, reorder weekday pills starting Sunday with styled pills, adjust nav indentation, and log customer actions for attachments/reset.
2026-01-28 19:49  Fix invite endpoint audit logging reference to remove undefined customer.
2026-01-28 19:52  Fix weekday pill clickability for Playwright by letting input capture pointer events.
2026-01-28 20:22  Restore Hebrew i18n UTF-8, simplify color/icon controls, add add-customer option in registration, and refine nav indentation.
2026-01-28 20:56  Switch date inputs to native date pickers, add sex pill radios, tweak RTL alignment, center collapsed nav, and unify color/icon controls.
2026-01-29 00:02  Align menu groups/indentation, center collapsed nav, enforce date pickers, and style sex pills + icon/color controls.
2026-01-29 00:22  Set nav group/item indentation and font sizes per spec (group 0 indent, items 3em).
2026-01-29 00:30  Increase menu font sizes and update hover color to primary.
2026-01-29 02:23  Added calendar hour tick column + grid lines for day/week views and locked recurring series to generate-until date with weekly interval default.
2026-01-29 02:28  Calendar hour grid now starts at 07:00, events use duration-based height, time labels removed from cards, and room/capacity combined in event meta.
2026-01-29 03:10  Fix admin app load (remove duplicate roomSummary const) while updating calendar event summary and hour grid metadata.
2026-01-29 07:49  Snap calendar events to hour grid (no gaps), render duration-based heights, move session icon inline with title, and stack action buttons in a full-height rail.
2026-01-29 08:05  Tighten calendar event action rail to 32px top buttons and align time-grid event content to top with reduced padding.
2026-01-29 08:12  Tighten calendar time-grid event padding/spacing so text aligns to top without indent and fits under 32px action buttons.
2026-01-29 08:19  Increase hour row height to 60px, remove time-grid card inline padding, and tighten week column gaps/padding.
2026-01-29 08:23  Increase hour row height to 72px and add 4px inline start padding for time-grid cards.
2026-01-29 08:31  Set hour rows to 64px, center hour labels, and darken time-grid lines for better contrast.
2026-01-29 08:38  Make time-grid session cards fully white and reduce action buttons to 26px height.
2026-01-29 08:44  Add top gap to hour grid, center hour labels, darken grid lines, set 64px hour rows, and enforce 48px min height for all-day events.
2026-01-29 08:50  Make past events fully opaque while dimming only the colored strip via pseudo-element.
2026-01-29 08:56  Add left padding to keep text clear of the color strip and darken past-event text.
2026-01-29 09:02  Set event horizontal padding to 8px, shrink hour label font, and reduce hour label column to 48px.
2026-01-29 09:08  Position timed events by start time in the hour grid and pin all-day events to a 48px top row with larger hour-top gap.
2026-01-29 09:16  Set all-day row/top gap to 36px so all-day items sit above the grid with consistent spacing.
2026-01-30 04:18  Fix calendar drag/drop snapping and time-grid positioning, default series generation to +1 year, harden public event route loading, and implement billing (models, APIs, UI, exports, charges on bookings/cancellations).
2026-01-30 04:31  Adjust BillingModule migration to avoid re-adding existing Room remote columns so deploy/test server can migrate cleanly.
2026-01-30 09:24  Add admin bootstrap script for safe admin creation/reset.
2026-01-30 10:48  Shrink sidebar width/padding and auto-collapse on small screens (<1500px).
2026-01-30 11:16  Raise hour-row height, add bold time line under session titles, and clear stray modal overlays on route change (fix billing clicks).
2026-01-30 12:22  Tighten calendar event padding and reduce time-line font size.
2026-01-30 13:25  Reduce hour label size and add delegated billing click handlers to ensure controls respond.
2026-01-30 14:06  Guard invalid session dates to prevent calendar render RangeError.
2026-01-31 21:01  Add invoices (model, API, admin screen) with billing invoice links, add profession/age fields, and translate audit summaries.
2026-01-31 21:05  Fix migration designer import for AddInvoices.
2026-01-31 22:35  Fix calendar drag/drop time offset handling, harden time formatting, extend audit summary translations, add WhatsApp bot PRD, and update agent context notes.
2026-01-31 22:48  Adjust calendar drag/drop to align start time to drop position (ignore pointer offset) to fix hour mismatch.
